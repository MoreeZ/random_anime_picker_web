(this["webpackJsonpptw-random-anime"]=this["webpackJsonpptw-random-anime"]||[]).push([[0],{1063:function(e,t,a){},1064:function(e,t,a){},1065:function(e,t,a){},1066:function(e,t,a){},1067:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),s=a.n(l),i=a(458),o=a(36),c=a(37),m=a(39),u=a(38),p=a(20),d=a(48),y=a(93),f=a.n(y),E=a(464),h=a(270),g=a(174),v=a(997),b=a(1006),O=a(173),A=a.n(O),N=a(460),S=a.n(N),I=a(271),_=a.n(I),T=a(92),M=a.n(T),j=a(94),w=a.n(j),D=a(267),L=a.n(D),k=a(461),x=a.n(k),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={spinTime:1e4},e.handleSpin=function(t){var a=e.props.anime,n=a[Math.floor(Math.random()*a.length)];e.props.fetchAnime(n.mal_id);var r=0;setInterval((function(){e.props.animeDescState.error&&!e.props.animeDescState.loading&&r<=20&&(r++,e.props.fetchAnime(e.props.currentAnime))}),1e3);var l=document.getElementById(n.mal_id),s=(l.parentElement.parentElement.childNodes.length-2)*l.parentElement.offsetWidth,i=function(e){for(var t=[],a=e.length>>>0;a--;)t[a]=e[a];return t}(l.parentElement.childNodes).indexOf(l)*(l.offsetWidth+20),o=window.innerWidth/2-18-Math.random()*(l.offsetWidth-13);console.log(n.title,l);var c=e.state.spinTime,m=document.getElementById("spin-button").parentElement,u=document.getElementById("reset-spinner-button").parentElement,p=document.querySelector(".display-winner"),d=document.querySelector(".carousel"),y=document.querySelector(".arrow"),f=document.getElementById("username-input").parentElement.parentElement,E=document.getElementById("list-type-menu-icon"),h=document.getElementById("absolute-anime-description"),g=document.querySelector(".header-container");d.style.transition="transform "+c+"ms cubic-bezier(0.165, 0.84, 0.44, 1)",d.style.transform="translateX(-"+(s+i-o)+"px)",m.style.opacity="0",m.style.transform="translateY(-40px)",m.style.pointerEvents="none",E.style.opacity="0",E.style.transform="translateY(-40px)",E.style.pointerEvents="none",y.style.transform="scaleY(1)",f.style.transition="all 200ms ease",f.style.opacity="0",f.style.transform="translateY(-40px)",f.style.pointerEvents="none",document.getElementById("anime-color-swapper").style.transform="translateY(-1.24em)",document.querySelector(".pink-anime").style.opacity="1",document.querySelector(".blue-anime").style.opacity="0",setTimeout((function(){m.style.display="none",u.style.display="flex",E.style.display="none",p.style.display="flex",f.style.display="none"}),300),setTimeout((function(){p.style.opacity="1",p.href=n.url,p.style.transform="translateY(0px)",p.style.pointerEvents="all",u.style.opacity="1",u.style.transform="translateY(0px)",u.style.pointerEvents="all",u.style.display="flex",d.style.transition="all 500ms ease",h.style.transition="all 200ms ease-in-out",h.style.transform="translateX(0%)",g.style.transition="all 200ms ease-in-out",g.style.transform="translateX(100%)"}),c)},e.handleReset=function(t){var a=document.getElementById("spin-button").parentElement,n=document.getElementById("reset-spinner-button").parentElement,r=document.querySelector(".display-winner"),l=document.querySelector(".carousel"),s=document.querySelector(".arrow"),i=document.getElementById("username-input").parentElement.parentElement,o=document.getElementById("list-type-menu-icon"),c=document.getElementById("absolute-anime-description"),m=document.querySelector(".header-container");l.style.transform="translateX(-100px)",l.style.transition="transform "+e.state.spinTime+"ms cubic-bezier(0.165, 0.84, 0.44, 1);",r.style.opacity="0",r.style.transform="translateY(-50px)",r.style.pointerEvents="none",n.style.opacity="0",n.style.transform="translateY(-50px)",n.style.pointerEvents="none",s.style.transform="scaleY(0)",c.style.transform="translateX(-100%)",c.style.transition="all 500ms ease-in-out",m.style.transition="all 500ms ease-in-out",m.style.transform="translateX(0%)",document.getElementById("anime-color-swapper").style.transform="translateY(0px)",document.querySelector(".pink-anime").style.opacity="0",document.querySelector(".blue-anime").style.opacity="1",setTimeout((function(){a.style.pointerEvents="all",a.style.opacity="1",a.style.transform="translateY(0px)",o.style.opacity="1",o.style.transform="translateY(0px)",o.style.pointerEvents="all",i.style.opacity="1",i.style.transform="translateY(0px)",i.style.pointerEvents="all",i.style.display="flex",r.style.display="none",n.style.display="none",a.style.display="flex",o.style.display="flex"}),300)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.anime;return r.a.createElement("div",{className:"top-toolbar"},r.a.createElement("div",{className:"toolbar-left"},r.a.createElement("form",{className:"mal-username-form",onSubmit:this.props.handleSubmit},r.a.createElement(S.a,{autoComplete:"off",hintText:"Your MyAnimeList username",errorText:this.props.error&&"Invalid username",id:"username-input",errorStyle:{position:"absolute",top:"0",left:"0",pointerEvents:"none",fontSize:"12px"}}),r.a.createElement(M.a,{tooltip:"Confirm",iconClassName:"material-icons",type:"submit"},"done")),r.a.createElement("a",{className:"display-winner",href:"loading",target:"_blank"},"View at MyAnimeList")),r.a.createElement("div",{className:"toolbar-right"},r.a.createElement(x.a,{onItemClick:this.props.handleChangeListType,value:this.props.value,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},iconButtonElement:r.a.createElement(M.a,{touch:!0,id:"list-type-menu-icon"},r.a.createElement(L.a,null))},r.a.createElement(w.a,{primaryText:"Plan To Watch",value:"6"}),r.a.createElement(w.a,{primaryText:"Currently Watching",value:"1"}),r.a.createElement(w.a,{primaryText:"Completed",value:"2"}),r.a.createElement(w.a,{primaryText:"On Hold",value:"3"}),r.a.createElement(w.a,{primaryText:"Dropped",value:"4"})),r.a.createElement(_.a,{label:"ROLL A RANDOM ANIME",primary:!0,onClick:e.length>0?this.handleSpin:function(){},id:"spin-button",style:{transition:"all 200ms ease"}}),r.a.createElement(_.a,{label:"RESET THE SPINNER",secondary:!0,onClick:e.length>0?this.handleReset:function(){},id:"reset-spinner-button",style:{display:"none",transform:"translateY(-20px)",opacity:"0",transition:"all 200ms ease",pointerEvents:"none"}})))}}]),a}(n.Component),R=Object(d.b)((function(e){return{animeDescState:e.mal.animeDescState,currentAnime:e.mal.currentAnime}}),(function(e){return{fetchAnime:function(t){e(function(e){return function(t){return t({type:"LOADING_ANIME_INFO",currentAnime:e}),g.Mal.anime(e).then((function(e){return e})).then((function(e){return t({type:"ANIME_INFO_LOADED",payload:e})})).catch((function(e){return t({type:"ANIME_INFO_FAILED_TO_LOAD",error:e})}))}}(t))}}}))(C),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.shuffle=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.anime,t=[];if(e.length>0)for(var a=0;a<80;a+=e.length)t.push(a);return console.log("anime in current listType",e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"carousel"},t.map((function(t){return r.a.createElement("div",{className:"virtual-container",key:t},e.map((function(e){return r.a.createElement("div",{className:"virtual-image each-image",key:e.mal_id},r.a.createElement("img",{src:e.image_url,alt:e.title}),r.a.createElement("div",{className:"anime-quickdesc"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title)))})))})),r.a.createElement("div",{className:"real-container"},this.shuffle(e).map((function(e){return r.a.createElement("div",{className:"real-image each-image",key:e.mal_id,id:e.mal_id},r.a.createElement("img",{src:e.image_url,alt:e.title}),r.a.createElement("div",{className:"anime-quickdesc"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title)))}))),r.a.createElement("div",{className:"virtual-container"},e.filter((function(t){return e.indexOf(t)<3})).map((function(e){return r.a.createElement("div",{className:"virtual-image each-image",key:e.mal_id},r.a.createElement("img",{src:e.image_url,alt:e.title}),r.a.createElement("div",{className:"anime-quickdesc"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title)))})))))}}]),a}(n.Component),B=Object(d.b)((function(e){return e.mal.userAnime?(e.mal.userAnime.length,{anime:e.mal.userAnime}):{anime:[]}}))(U),q=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"error-message-container"},r.a.createElement("h1",{className:"error-header"},'The username "',this.props.username,'" has not been found.'),r.a.createElement("h4",{className:"error-subheading"},"Make sure the username you have entered is verified at MyAnimeList."))}}]),a}(n.Component),F=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.formatListType=function(e){switch(e){case"6":return"Plan To Watch";case"1":return"Currently Watching";case"2":return"Completed";case"4":return"Dropped";case"3":return"On Hold";default:return"Select list type"}},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"error-message-container"},r.a.createElement("h1",{className:"error-header"},'The "',this.formatListType(this.props.listType),'" List of'," ",this.props.username," is empty."),r.a.createElement("h4",{className:"error-subheading"},this.props.username,' must have at least one anime in "',this.formatListType(this.props.listType),'".'))}}]),a}(n.Component),Y=a(462),z=a.n(Y),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={listType:"6",open:!1,firstLoaded:!1},e.handleOpen=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!0}))},e.handleClose=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.fetchAnime;if(""!==t.target[0].value&&null!==t.target[0]){a(t.target[0].value,e.state.listType);var n=0;setInterval((function(){"Internal Server Error"===e.props.errorMessage&&!e.props.displayOption.loading&&n<=20&&(n++,a(e.props.username,e.state.listType))}),1e3)}},e.handleChangeListType=function(t,a){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{listType:a.props.value})),e.props.fetchAnime(e.props.username,a.props.value)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.fetchAnime;console.log("COMPONENT HAS MOUNTED"),t(this.props.username,this.state.listType);var a=0;setInterval((function(){"Internal Server Error"===e.props.errorMessage&&!e.props.displayOption.loading&&a<=20&&(a++,t(e.props.username,e.state.listType))}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.anime,a=e.displayOption;return r.a.createElement("div",{className:"main-carousel"},r.a.createElement(R,{value:this.state.listType,anime:t,handleSubmit:this.handleSubmit,error:"Bad Request"===this.props.errorMessage,handleChangeListType:this.handleChangeListType}),r.a.createElement("div",{className:"carousel-container"},a.loading||"Internal Server Error"===this.props.errorMessage?r.a.createElement("div",{className:"loading-container"},r.a.createElement(A.a,{size:150,thickness:10,color:"#f1f1f1",className:"circular-progress"})):a.success?r.a.createElement(B,null):"Bad Request"===this.props.errorMessage?r.a.createElement(q,{username:this.props.username}):r.a.createElement(F,{listType:this.state.listType,username:this.props.username})),r.a.createElement("div",{className:"bottom-toolbar"},r.a.createElement(M.a,{style:{borderColor:"white",zIndex:"3"},iconClassName:"material-icons",type:"submit",onClick:this.handleOpen},"contact_mail"),r.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.randomanimepicker",id:"play-icon"},r.a.createElement("span",null,"Download my app with many more features on Google Play!"),r.a.createElement("img",{src:"https://downloads.andyroid.net/wp-content/uploads/2015/09/Google-Play-Store-icon.png",alt:"PLAY"})),r.a.createElement(z.a,{title:"Contact the developer",modal:!1,open:this.state.open,onRequestClose:this.handleClose},r.a.createElement("span",null,"Email: ",r.a.createElement("span",null,"moreez@protonmail.com")))))}}]),a}(n.Component),W=Object(d.b)((function(e){return console.log("updated user anime",e.mal.userAnime),e.mal.userAnime?0===e.mal.userAnime.length?{anime:e.mal.userAnime,displayOption:e.mal.displayOption,noAnime:!0,errorMessage:e.mal.errorMessage,username:e.mal.currentUser}:{anime:e.mal.userAnime,displayOption:e.mal.displayOption,noAnime:!1,errorMessage:e.mal.errorMessage,username:e.mal.currentUser}:{anime:[],displayOption:e.mal.displayOption,noAnime:!1,errorMessage:e.mal.errorMessage,username:e.mal.currentUser}}),(function(e){return{fetchAnime:function(t,a){e(function(e,t){return function(a){a({type:"LOADING_MAL_DATA",newUsername:e}),g.Mal.user(e).then((function(e){return e.anime_stats.total_entries})).then((function(n){for(var r=Math.floor(n/300)+1,l=[],s=v((function(e){return e}),1,1e3),i=function(r){s(r).then((function(){var s=function(){var s=Object(h.a)(f.a.mark((function s(){return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,g.Mal.user(e,"animelist","all",r).then((function(e){return l.push.apply(l,Object(E.a)(e.anime)),e})).then((function(e){return console.log(r,e),e})).then((function(){if(l.length===n){console.log("allAnime",l);var e=l.filter((function(e){return e.watching_status===Number(t)}));return a({type:"MAL_DATA_REQUEST_SUCCESSFUL",payload:e})}})).catch((function(e){if("Something went wrong, please try again later"===JSON.parse(e.error).message)return a({type:"MAL_DATA_REQUEST_FAILED",error:e})}));case 2:return s.sent,s.abrupt("return",Response);case 4:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(s,{retries:5});case 2:case"end":return e.stop()}}),e)})))()})).catch((function(e){return console.log("ERROR HAS OCCURED",e)}))},o=1;o<=r;o++)i(o)}))}}(t,a))},clearError:function(t){e({type:"CLEAR_ERROR_MESSAGE",payload:t})},changeUsername:function(t){e({type:"MAL_DATA_REQUEST_SUCCESSFUL",username:t})}}}))(P),G=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.animeInfo;return r.a.createElement("div",{id:"section2",className:"section"},r.a.createElement("div",{className:"mal-header"},r.a.createElement("div",{id:"absolute-anime-description"},e?r.a.createElement("div",{className:"anime-details"},r.a.createElement("div",{className:"anime-info"},r.a.createElement("h3",{className:"info-heading"},"Information"),r.a.createElement("ul",{className:"info-list"},r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Episodes: "),r.a.createElement("span",{className:"pink bold"},e.episodes)),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Genres: "),e.genres.map((function(t,a){return a===e.genres.length-1?r.a.createElement("span",{key:t.mal_id},t.name):r.a.createElement("span",{key:t.mal_id},t.name,", ")}))),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Status: "),e.status),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Aired: "),e.aired.string),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Duration: "),e.duration),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Rating: "),e.rating))),r.a.createElement("div",{className:"anime-desc-main"},r.a.createElement("h2",null,e.title),r.a.createElement("h5",null,e.title_japanese)),r.a.createElement("div",{className:"anime-ratings"},r.a.createElement("h3",{className:"rating-heading"},"Ratings"),r.a.createElement("ul",{className:"rating-list"},r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Score: "),r.a.createElement("span",{className:"pink bold"},e.score)),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Scored by: "),"#",e.scored_by),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Ranked: "),"#",e.rank),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Popularity: "),"#",e.popularity),r.a.createElement("li",null,r.a.createElement("span",{className:"bold"},"Members: "),e.members)))):r.a.createElement("div",{className:"loading-container"},r.a.createElement(A.a,{size:150,thickness:10,color:"#f1f1f1",className:"circular-progress"}))),r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{style:{fontSize:"2em",marginBottom:"20px",color:"white"}},"MyAnimeList"),r.a.createElement("h5",{style:{display:"flex",flexDirection:"row"}},"RANDOM"," ",r.a.createElement("span",{id:"anime-color-swapper"},r.a.createElement("span",{className:"blue-anime"},"ANIME"),r.a.createElement("span",{className:"pink-anime"},"ANIME"))," ","PICKER"))),r.a.createElement(W,null))}}]),a}(n.Component),X=Object(d.b)((function(e){return e.mal.animeInfo,{animeInfo:e.mal.animeInfo,animeDescState:e.mal.animeDescState}}))(G);var H=function(){return r.a.createElement(i.MuiThemeProvider,null,r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(1063),a(1064),a(1065),a(1066);var Q=a(62),J={userAnime:void 0,animeInfo:void 0,displayOption:{success:!1,loading:!1,error:!1},animeDescState:{success:!1,loading:!1,error:!1},errorMessage:"",currentUser:"moonbox",currentAnime:{}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_MAL_DATA":return Object(p.a)(Object(p.a)({},e),{},{displayOption:{success:!1,loading:!0,error:!1},currentUser:t.newUsername});case"MAL_DATA_REQUEST_SUCCESSFUL":return console.log("response in reducer: ",t.payload),Object(p.a)(Object(p.a)({},e),{},{userAnime:t.payload,displayOption:{success:!0,loading:!1,error:!1},errorMessage:""});case"MAL_DATA_REQUEST_FAILED":return console.log("MAL FAILED",t.error),Object(p.a)(Object(p.a)({},e),{},{displayOption:{success:!1,loading:!1,error:!0},errorMessage:t.error.response.statusMessage});case"LOADING_ANIME_INFO":return Object(p.a)(Object(p.a)({},e),{},{animeDescState:{success:!1,loading:!0,error:!1},currentAnime:t.currentAnime});case"ANIME_INFO_LOADED":return Object(p.a)(Object(p.a)({},e),{},{animeInfo:t.payload,animeDescState:{success:!0,loading:!1,error:!1}});case"ANIME_INFO_FAILED_TO_LOAD":return console.log("FAILED TO LOAD ANIME INFO",t.error),Object(p.a)(Object(p.a)({},e),{},{animeDescState:{success:!1,loading:!1,error:!0}});default:return e}},V=Object(Q.c)({mal:K}),$=a(463),Z=Object(Q.e)(V,Object(Q.d)(Object(Q.a)($.a)));s.a.render(r.a.createElement(d.a,{store:Z},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},465:function(e,t,a){e.exports=a(1067)},580:function(e,t){},582:function(e,t){},591:function(e,t){},593:function(e,t){},618:function(e,t){},620:function(e,t){},621:function(e,t){},626:function(e,t){},628:function(e,t){},635:function(e,t){},637:function(e,t){},655:function(e,t){},657:function(e,t){},669:function(e,t){},672:function(e,t){},698:function(e,t){},816:function(e,t){}},[[465,1,2]]]);
//# sourceMappingURL=main.2b3ea06b.chunk.js.map